<html style="padding:10px;">
    <head>
        <title>URY AutoNews Selection</title>
        <h2>AutoNews Selection</h2>

        <!-- Bootstrap-->

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>

    </head>
    <body>

        {{ if .DataDriven }}
            <div class="alert alert-success alert-dismissable" id="success-alert">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                <strong>Success!</strong> AutoNews Preference Updated
            </div>
        {{ end }}

        <div style="float: left;">

            {{ if not .Timeslots }}
                <p style="clear:both; margin: 1em;"> No Shows Available Today </p>
            {{ end }}

            {{range .Timeslots}}
                <button class="selbtn btn btn-outline-primary" style="display:block; margin: 10px" onclick="button({{.Timeslotid}})" id=btn{{.Timeslotid}}>{{.Title}}</button>
            {{end}}

        </div>

        <div style="float: left;">
            {{range .Timeslots}}

                <form id="form{{.Timeslotid}}" class="autonewsform" style="margin:5em;">
                    <input type="hidden"  name="timeslotid" value="{{.Timeslotid}}">
                    <input type="checkbox" name="S" {{if .AutoNewsStart}}checked{{end}}>
                    <label for="S">AutoNews at Start of Show</label>
                    <br>
                    <input type="checkbox" name="E" {{if .AutoNewsEnd}}checked{{end}}>
                    <label for="E">AutoNews at End of Show</label>
                    <br>
                    <input type="submit" class="btn btn-primary" >
                </form>

            {{end}}
        </div>

        <p style="clear:both; margin: 1em;">Any problems, please contact Computing team (#computing on the URY Slack)</p>

        <div style="width: 30%; display: none;" id="autoselector">

            <ul class="list-group">
                <!-- Don't Judge Tables. This was horrible to implement otherwise :) -->
                <li class="list-group-item list-group-item-primary" style="text-align: center;">AutoSelector </li>
                
                    <li class="list-group-item list-group-item-dark selector-component" id="li1">
                        <table>
                            <td>
                                <div class="spinner-border" id="spinner1"></div>
                                <div style="float: left vertical-align: middle;"><h1 style="color: green; display: none;" id="check1">✓</h1></div>
                            </td>
                            <td>

                            </td>
                            <td>
                                <div style="float: left; vertical-align: middle;" id="text1"></div>
                            </td>
                        </table>
                    </li>

                    <li class="list-group-item list-group-item-dark selector-component" id="li2">
                        <table>
                            <td>
                                <div class="spinner-border" id="spinner2"></div>
                                <div style="float: left vertical-align: middle;"><h1 style="color: green; display: none;" id="check2">✓</h1></div>
                            </td>
                            <td>

                            </td>
                            <td>
                                <div style="float: left; vertical-align: middle;" id="text2"></div>
                            </td>
                        </table>
                    </li>

                    <li class="list-group-item list-group-item-dark selector-component" id="li3">
                        <table>
                            <td>
                                <div class="spinner-border" id="spinner3"></div>
                                <div style="float: left vertical-align: middle;"><h1 style="color: green; display: none;" id="check3">✓</h1></div>
                            </td>
                            <td>

                            </td>
                            <td>
                                <div style="float: left; vertical-align: middle;" id="text3"></div>
                            </td>
                        </table>
                    </li>

            </ul>

        </div>

        <script>

            function hideforms(){
                var forms = document.getElementsByClassName("autonewsform");
                for (var i = 0; i<forms.length; i++){
                    forms[i].style.display = "none";
                }
                var btns = document.getElementsByClassName("selbtn");
                for (var i = 0; i<btns.length; i++){
                    btns[i].classList.remove("active")
                }
            }

            function button(timeslotid){
                hideforms();
                document.getElementById("form" + timeslotid).style.display = "block";
                document.getElementById("btn" + timeslotid).classList.add("active");
            }

            hideforms();
            setTimeout(function(){document.getElementById("success-alert").style.display = "none";}, 3000);

            setTimeout(function(){window.location.reload();}, 5000);

            function completeABox(boxNo){
                document.getElementById("spinner" + boxNo).style.display = "none";
                document.getElementById("check" + boxNo).style.display = "block";
                document.getElementById("li" + boxNo).classList.remove("list-group-item-dark");
                document.getElementById("li" + boxNo).classList.add("list-group-item-success");
            }

            var listElements = document.getElementsByClassName("selector-component");
            for (i = 0; i<listElements.length; i++){
                listElements[i].style.display = "inline";
            }

            document.getElementById("autoselector").style.display = "block";

            var t = new Date()
            document.getElementById("text1").innerText = t.getHours() + ":59:45 - Switch to AutoNews";
            document.getElementById("text2").innerText = (t.getHours()+1) + ":00:00 - No Action";
            document.getElementById("text3").innerText = (t.getHours()+1) + ":02:02 - Switch to Jukebox";
        
        </script>

    </body>

</html>